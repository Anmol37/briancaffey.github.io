<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Arch Linux Installation Guide</title>
  <meta name="description" content="This post will be a comprehensive guide to installing Arch Linux. I will be installing Arch Linux on a refurbished ThinkPad T430 Laptop, first as a guest OS ...">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/2017/08/03/arch-linux-install.html">
  <link rel="alternate" type="application/rss+xml" title="Brian Caffey" href="http://localhost:4000/feed.xml">
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-75060954-1', 'auto');
  ga('send', 'pageview');

</script>
  <body>
    <style>
    img{
      display:block;
      margin:auto;
    }
    </style>
    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Brian Caffey</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/contact">Contact</a>
          
        
          
          <a class="page-link" href="/blog">Blog</a>
          
        
          
          <a class="page-link" href="/my-other-site">My Other Website</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/projects/index.html">Projects</a>
          
        
          
          <a class="page-link" href="/resume">Resume</a>
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Arch Linux Installation Guide</h1>
    <p class="post-meta"><time datetime="2017-08-03T00:00:00-04:00" itemprop="datePublished">Aug 3, 2017</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>This post will be a comprehensive guide to installing Arch Linux. I will be installing Arch Linux on a refurbished <a href="http://www3.lenovo.com/us/en/laptops/thinkpad/t-series/t430/">ThinkPad T430 Laptop</a>, first as a guest OS on a Windows 10 Pro host, and then on a secondary SSD that will replace the optical drive. I will try to cover absolutely everything you need from creating a bootable USB drive to customizing the desktop interface.</p>

<h2 id="put-arch-on-a-usb-drive">Put arch on a USB drive</h2>

<p>I recommend that you download a BitTorrent client such as <a href="http://dev.deluge-torrent.org/wiki/Download">Deluge</a>, and then grab the ISO magnet link from <a href="https://www.archlinux.org/download/">https://www.archlinux.org/download/</a>. It should take just a few minutes to complete the download via BitTorrent.</p>

<p>If you are using a Mac to build the bootable drive, I have read that you can use the <code class="highlighter-rouge">dd</code> command. This didn’t work for me. I referred to the Installation manual for Arch and found instructions for using Rufus, a Windows/Linux utility for burning ISO images to bootable media. The Arch Wiki has a highlighted note about using Rufus:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Note: Be sure to select DD mode or the image will be transferred incorrectly.
</code></pre></div></div>

<p>A problem I found is that you can’t select the ISO with DD mode selected. I was able to select ISO (in ISO mode), choose the ISO file in my downloads folder, and then select DD mode.</p>

<h1 id="virtualbox">VirtualBox</h1>

<p>The T430 came with a copy of Windows Pro, which I installed right away. I also picked up a SSD sleeve that can replace the optical drive for dual booting or additional storage. I have installed Arch Linux on my Windows desktop machine, as well as my MacBook Air. Land of Linux has a <a href="http://landoflinux.com/linux_install_archlinux_process.html">great tutorial on installing Arch Linux in Virtual Box</a>, but it is frustrating because there is no date and no comments. This part of the guide will closely follow this guide and provide some corrections where you might get stuck following the directions command for command.</p>

<p>First we want to set up a new virtual machine with the options Linx / ArchLinux / 64-bit. You are probably using a 64-bit machine (although some old netbooks are 32-bit). The first obstacle is you will probably face with VirtualBox is that there are no options for 64-bit. This is because Intel Virtualization is often disabled by default. You will need to go into the BIOS (by pressing <code class="highlighter-rouge">delete</code> of <code class="highlighter-rouge">F10</code>/<code class="highlighter-rouge">F12</code> at boot time) and then change this option, save the BIOS settings and restart. With this done, you will want to create a virtual machine with at at least 20GB of storage and around 4GB of memory.</p>

<h4 id="quick-note-about-fonts">Quick note about fonts</h4>

<p>The default font when installing Arch Linux is quite small, so you may want to increase the font size.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls /usr/share/kbd/consolefonts/
</code></pre></div></div>

<p>This command will list the available fonts. To set a font, run the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>setfont sun12x22
</code></pre></div></div>

<p>To revert back to the default font, just run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>setfont
</code></pre></div></div>

<p>You can also view the current font with</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>showconsolefont
</code></pre></div></div>

<h3 id="using-fdisk-for-partitioning">Using <code class="highlighter-rouge">fdisk</code> for partitioning</h3>

<blockquote>
  <p>fdisk is a dialogue-driven program for creation and manipulation of partition tables.</p>
</blockquote>

<p>We want to run fdisk and enter the device we want to work with as the first argument after the command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fdisk /dev/sda
</code></pre></div></div>

<h4 id="note-about-fdisk">Note about fdisk</h4>

<p>When installing Arch Linux on a disk that has Windows or Linux installed, you can delete the partitions on the drive (which is usually labeled <code class="highlighter-rouge">/dev/sda</code> or <code class="highlighter-rouge">/dev/sdb</code> or <code class="highlighter-rouge">/dev/sdc</code>). Run <code class="highlighter-rouge">lsblk</code> to determine which drive you want to format, then run <code class="highlighter-rouge">fdisk /dev/sdX</code> where <code class="highlighter-rouge">X</code> corresponds to the drive we will be using. You should be inside the fdisk menu. Press <code class="highlighter-rouge">d</code> to start deleting partitions. You may get some warnings about a partition containing some type of trace (such as ext4). This is fine. You can delete all of the partitions.</p>

<h3 id="create-a-root-partition">Create a root partition</h3>

<p>Press <code class="highlighter-rouge">n</code> and then <code class="highlighter-rouge">p</code>. When prompted for <code class="highlighter-rouge">first sector</code> press <code class="highlighter-rouge">ENTER</code>, and for <code class="highlighter-rouge">last sector</code> enter <code class="highlighter-rouge">+10G</code> for a 10GB partition.</p>

<h3 id="create-a-swap-partition">Create a SWAP partition</h3>

<p>Press <code class="highlighter-rouge">n</code> for a new partition, press <code class="highlighter-rouge">p</code> for primary partition. Select partition number <code class="highlighter-rouge">2</code>. Press <code class="highlighter-rouge">ENTER</code> to select the default start sector, and then type <code class="highlighter-rouge">+1G</code> to create a 1GB swap partition. Press <code class="highlighter-rouge">t</code> to indicate the type of partition this will be. Specify that we are still working with partition <code class="highlighter-rouge">2</code>, and then enter <code class="highlighter-rouge">82</code>, the code for SWAP partition.</p>

<h3 id="create-home-partition">Create home partition</h3>

<p>Enter the following <code class="highlighter-rouge">fdisk</code> commands:</p>

<p><code class="highlighter-rouge">n</code>, <code class="highlighter-rouge">p</code>, <code class="highlighter-rouge">3</code>, <code class="highlighter-rouge">ENTER</code>, <code class="highlighter-rouge">ENTER</code>, <code class="highlighter-rouge">t</code>, <code class="highlighter-rouge">3</code>, <code class="highlighter-rouge">83</code>.</p>

<p>Before exiting the <code class="highlighter-rouge">fdisk</code> interface, enter the <code class="highlighter-rouge">w</code> command to write the proposed changes.</p>

<p>We should see the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.
</code></pre></div></div>

<h3 id="create-filesystems-and-format-partitions">Create Filesystems and Format Partitions</h3>

<p>Make filesystems for partitions 1 and 3:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkfs.ext4 /dev/sda1
mkfs.ext4 /dev/sda3
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkswap /dev/sda2
swapon /dev/sda2
</code></pre></div></div>

<h3 id="verify-our-layout-with-lsblk">Verify our layout with <code class="highlighter-rouge">lsblk</code></h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsblk
</code></pre></div></div>

<h3 id="mount-filesystems">Mount Filesystems</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount /dev/sda1 /mnt
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir /mnt/home
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount /dev/sda3 /mnt/home
</code></pre></div></div>

<p>(The swap partition has already been initialized.)</p>

<h3 id="backup-mirrorlist">Backup mirrorlist</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp -vf /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.backup
</code></pre></div></div>

<p>We can edit the mirrorlist to select the closest mirror, but this is not necessary.</p>

<h3 id="install-reflector">Install reflector</h3>

<p>This synchronizes package databases:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -Syy
</code></pre></div></div>

<p>Next we want to install our first package: <code class="highlighter-rouge">reflector</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -S reflector
</code></pre></div></div>

<p>The following command will sort the five best mirrors based on your location:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>reflector --verbose -l 5 --sort rate --save /etc/pacman.d/mirrorlist
</code></pre></div></div>

<p>Re-issue the sync command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -Syy
</code></pre></div></div>

<h3 id="installing-the-base">Installing the base</h3>

<p>The base installation is installed using a special script called <code class="highlighter-rouge">pacstrap</code>.</p>

<p>We will be using the <code class="highlighter-rouge">base</code> group and also the <code class="highlighter-rouge">base-devel</code> group that we will need later.</p>

<p>Issue the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacstrap /mnt base base-devel
</code></pre></div></div>

<p>This will install lots of packages; it takes a few minutes. It took me <code class="highlighter-rouge">4:27.06</code> on my MacBook Air and about 2.5 minutes on my ThinkPad.</p>

<h3 id="create-etcfstab">Create /etc/fstab</h3>

<p>The next step is to create a mount table that will be responsible for automatically mounting filesystems at boot time.</p>

<p>Issue the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>genfstab -U -p /mnt &gt;&gt; /mnt/etc/fstab
</code></pre></div></div>

<p>We can verify the entries with <code class="highlighter-rouge">cat /mnt/etc/fstab</code>, or <code class="highlighter-rouge">blkid /dev/sd#</code> where <code class="highlighter-rouge">#</code> is the partition number.</p>

<h3 id="chroot---configuring-the-base-system">Chroot - Configuring the base system</h3>

<p>To configure our new installation, we need to issue the <code class="highlighter-rouge">arch-chroot</code> command. This command is used as follows: <code class="highlighter-rouge">arch-chroot</code> followed by the new root directory as the first argument.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@archiso ~ # arch-chroot /mnt /bin/bash
[root@archiso /]#
</code></pre></div></div>

<p>We could pass in additional arguments to specify a particular shell, but here we are using <code class="highlighter-rouge">bash</code>.</p>

<h3 id="configuring-locale-settings">Configuring locale settings</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano /etc/locale.gen
</code></pre></div></div>

<p>Uncomment <code class="highlighter-rouge">en_US.UTF-8 UTF-8</code> for US English.</p>

<p>Once the desired locales have been uncommented, run <code class="highlighter-rouge">local-gen</code>.</p>

<p>Next we will create <code class="highlighter-rouge">/etc/locale.conf</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo LANG=en_US.UTF-8 &gt; /etc/locale.conf
export LANG=en_US.UTF-8
</code></pre></div></div>

<p>Create the following file: <code class="highlighter-rouge">/etc/vconsole.conf</code> and add the following line:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>KEYMAP=us
</code></pre></div></div>

<p>To configure the time zone, we need to create a link to a file called <code class="highlighter-rouge">/etc/localtime</code>.</p>

<p>The following command won’t work, we will do this in a later step, so skip the following command for now.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ln -s /usr/share/zoneinfo/US/Eastern /etc/localtime
</code></pre></div></div>

<p>This worked on my MacBook Air in VirtualBox, but in doing this on my Windows host in VirtualBox trying to link to the file <code class="highlighter-rouge">/etc/localtime</code> gave an error that the file already existed. Skipping this step on my ThinkPad was OK. Looking in the file, it seemed that UTC was already configured.</p>

<h3 id="set-the-hardware-clock">Set the Hardware Clock</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hwclock --systohc --utc
</code></pre></div></div>

<h3 id="set-the-host-name-for-the-system">Set the Host Name for the System</h3>

<p>I’m using the hostname arch20815, you can pick whatever host name you want.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo arch20815 &gt; /etc/hostname
</code></pre></div></div>

<h3 id="enable-multilib-repository">Enable Multilib Repository</h3>

<p>Add the following to <code class="highlighter-rouge">/etc/pacman.conf</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[multilib]
Include = /etc/pacman.d/mirrorlist
</code></pre></div></div>

<p>And then run</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -Syy
</code></pre></div></div>

<h3 id="add-support-for-yaourt-package-tool">Add support for Yaourt Package Tool</h3>

<p>Add the following to the end of <code class="highlighter-rouge">/etc/pacman.conf</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[archlinuxfr]
SigLevel = Never
Server = http://repo.archlinux.fr/$arch
</code></pre></div></div>

<p>Then run <code class="highlighter-rouge">pacman -Syy</code>.</p>

<h3 id="synchronize-and-update-database-packages">Synchronize and Update Database Packages</h3>

<p>Run the “update system” command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -Syu
</code></pre></div></div>

<h3 id="create-a-password-for-the-root-account">Create a password for the root account</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passwd
</code></pre></div></div>

<p>and enter a password for the root user.</p>

<h3 id="add-a-new-user-with-sudo-privileges">Add a new user with sudo privileges</h3>

<p>To add a new user we issue <code class="highlighter-rouge">useradd</code> along with primary and secondary groups. <code class="highlighter-rouge">wheel</code> group members will be able to issue commands prefixed with <code class="highlighter-rouge">sudo</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>useradd -mg users -G wheel,storage,power -s /bin/bash brian
</code></pre></div></div>

<p>Then set a password for this user:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passwd brian
</code></pre></div></div>

<h3 id="install-sudo-package">Install sudo Package</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -S sudo
</code></pre></div></div>

<h3 id="configuring-a-sudo---adding-user-to-wheel-group">Configuring a sudo - adding user to wheel group</h3>

<p>We now need to configure the sudo configuration file. In order to edit this file we must use a special command called <code class="highlighter-rouge">visudo</code>.</p>

<p>This is an editor like <code class="highlighter-rouge">vi</code> or <code class="highlighter-rouge">vim</code> and it edits the sudo config file.</p>

<p>When we run <code class="highlighter-rouge">visudo</code>, we might see the follwoing error:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>visudo: specified editor (vim) doesn't exist.
</code></pre></div></div>

<p>Let’s install vim:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -S vim
</code></pre></div></div>

<p>Now we should be able to run <code class="highlighter-rouge">visudo</code>.</p>

<p>We need to uncomment the following line:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># %wheel ALL=(ALL) ALL
</code></pre></div></div>

<p>To do this, press the down arrow until we are on the line we need to uncomment, then press <code class="highlighter-rouge">i</code>, then remove the <code class="highlighter-rouge">#</code> and space. Next, press <code class="highlighter-rouge">esc</code> and then press <code class="highlighter-rouge">:</code> and then <code class="highlighter-rouge">x</code> and then press <code class="highlighter-rouge">ENTER</code>. That should save our changes. Arch Linux warns that this file ONLY be edited with <code class="highlighter-rouge">vim</code>.</p>

<h3 id="installing-a-bootloader">Installing a bootloader</h3>

<p>At this point the directions will fork based on your motherboard firmware. By default grub-install uses target x86_64-efi. If you don’t have a UEFI system you should use the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grub-install --target=i386-pc --recheck /dev/sdb
</code></pre></div></div>

<p>If this works properly you should see the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Installing for i386-pc platform.
Installation finished. No error reported.
</code></pre></div></div>

<blockquote>
  <p>–target=i386-pc instructs grub-install to install for BIOS systems only. It is recommended to always use this option to remove ambiguity in grub-install.</p>
</blockquote>

<p>Here is <a href="https://wiki.archlinux.org/index.php/GRUB">more information about GRUB</a> from the Arch Wiki.</p>

<p>We need to install a bootloader on the first system hard disk (/dev/sda):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -S grub
grub-install /dev/sda
grub-mkconfig -o /boot/grub/grub.cfg
</code></pre></div></div>

<p>[Note: If you had a multi OS environment, you could install the “os-prober” package with “pacman -S os-prober” before running the “grub-mkconfig” command. Os-prober will detect other operating systems when generating the grub.cfg file.]</p>

<h3 id="arch-linux-is-now-installed">Arch Linux is now installed</h3>

<p>Issue the following commands to exit:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exit
umount /mnt/home
umount /mnt
reboot
</code></pre></div></div>

<h3 id="boot-from-existing-os">Boot from existing OS</h3>

<p>At the startup screen, select “Boot existing OS”.</p>

<p>I got a strange error message at login:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>arch20815 login: [9.921142] piix4_smbus 0000:00:07.0: SMBus base address uninitialized - upgrade BIOS or use force_addr=0xaddr
</code></pre></div></div>

<p>Press <code class="highlighter-rouge">ENTER</code> to return to the login prompt.</p>

<p>Login with the <code class="highlighter-rouge">sudo</code> user we created.</p>

<p>We can check to see if this user was setup properly by running:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[brian@arch20815 ~]$ sudo whoami

We trust you have received the usual lecture from the local System Administrator. It usually boils down to these three things:

    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.

[sudo] password for brian:
root
[brian@arch20815 ~]$
</code></pre></div></div>

<h3 id="configuring-the-network">Configuring the Network</h3>

<p>After the reboot we will have lost network connectivity. We need to create a new definition to our interface. We can isssue the command <code class="highlighter-rouge">ip link</code>.</p>

<p>Run <code class="highlighter-rouge">sudo vi /etc/systemd/network/enp0s3.netork</code> and add the following to this file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Match]
Name=en*

[Network]
DHCP=yes
</code></pre></div></div>

<p>Then we need to run the following commands:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl restart systemd-networkd
sudo systemctl enable systemd-networkd
</code></pre></div></div>

<p>Next issue the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo vi /etc/resolv.conf
</code></pre></div></div>

<p>And add the following to this file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nameserver 8.8.8.8
nameserver 8.8.4.4
</code></pre></div></div>

<p>Next we can check connectivity:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip a s
ping -c 3 www.google.com
</code></pre></div></div>

<p>We should see that we have been assigned an IP address and that we can ping google.com.</p>

<h3 id="run-a-full-system-update">Run a full System update</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo pacman -Syu
</code></pre></div></div>

<h3 id="installing-the-x-environment">Installing the X Environment</h3>

<p>I have had problems with this step in the past.</p>

<p>The next step in the tutorial is to run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo pacman -S xorg-server xorg-xinit xorg-utils xorg-server-utils mesa xorg-twm xterm xorg-xclock
</code></pre></div></div>

<p>But this will result in:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>error: target not found: xorg-utils
error: target not found: xorg-server-utils
</code></pre></div></div>

<p>It seems that these packages have been deprecated. I think a solution to this is to run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -S xorg-apps
</code></pre></div></div>

<p>and then install the remaining packages:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo pacman -S xorg-server xorg-xinit mesa xorg-twm xterm xorg-xclock
</code></pre></div></div>

<p>Select option <code class="highlighter-rouge">1</code>.</p>

<p>Next we need to install <code class="highlighter-rouge">linux-headers</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo pacman -S linux-headers
</code></pre></div></div>

<p>Next we need to install some VirtualBox packages:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo pacman -S virtualbox-guest-utils virtualbox-guest-dkms
</code></pre></div></div>

<p>The tutorial didn’t mention the <code class="highlighter-rouge">linux-headers</code> package, but the error message that comes up if you skip this step say that this package is needed.</p>

<p><code class="highlighter-rouge">xorg-server-utils</code> seems to have been removed, but it was a meta-package that simply included the following:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xorg-iceauth xorg-sessreg xorg-xcmsdb xorg-xbacklight xorg-xgamma xorg-xhost xorg-xinput xorg-xmodmap xorg-xrandr xorg-xrdb xorg-xrefresh xorg-xset xorg-xsetroot
</code></pre></div></div>
<p>Installing these packages individually did not help.</p>

<p>This does a full install of xorg (reinstalling many packages I just installed). After running this command, running <code class="highlighter-rouge">startx</code> gives no errors and lets me enter the X environment.</p>

<h3 id="installing-gnome-desktop">Installing GNOME Desktop</h3>

<p>Next, let’s install <code class="highlighter-rouge">GNOME</code> desktop. Issue the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo pacman -S gnome gnome-extra gdm
</code></pre></div></div>

<p>Accept all of the defaults and then confirm by pressing <code class="highlighter-rouge">Y</code>.</p>

<h3 id="installing-networking-tools">Installing Networking Tools</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo pacman -S net-tools
</code></pre></div></div>

<h3 id="installing-popular-packages">Installing popular packages</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo pacman -S pulseaudio pulseaudio-alsa pavucontrol gnome-terminal firefox flashplugin vlc deluge smplayer audacious qmmp gimp xfburn gedit gnome-system-monitor
</code></pre></div></div>

<h3 id="installing-codecs-for-audio-and-video">Installing codecs for audio and video</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo pacman -S a52dec faac faad2 flac jasper lame libdca libdv libmad libmpeg2 libtheora libvorbis libxv wavpack x264 xvidcore
</code></pre></div></div>

<h3 id="install-yaourt">Install Yaourt</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo pacman -S yaourt
</code></pre></div></div>

<p><strong>NEVER run yaourt with sudo or as root</strong></p>

<p>Finally, enable GNOME to start automatically at boot:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl enable gdm
</code></pre></div></div>

<p>The last issue I had was getting GNOME Desktop to display in full-screen in VirtualBox. To do this, click on the Devices Tab and then Insert Guest Additions Image.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>reboot
</code></pre></div></div>

<h3 id="customizing-gnome-desktop">Customizing GNOME Desktop</h3>

<p>Next let’s work on customizing our GUI.</p>

<p>We will now start making use of the <code class="highlighter-rouge">yaourt</code> utility to build packages for programs we want to install.</p>

<p>Yaourt gives us a useful flag to search packages:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yaourt -Ss search_term1 search_term2
</code></pre></div></div>

<p>This returns a list of packages which match search terms either in their title or description. When you find the right package you can copy the exact name and then download it with:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yaourt -S package_name
</code></pre></div></div>

<p><code class="highlighter-rouge">pacman</code> offers similar functionality, and so does <code class="highlighter-rouge">pacaur</code>. There are several options for how to download software with Arch Linux.</p>

<p>Here are some packages and utilities that can help with customizing the GNOME environment:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo pacman -S gnome-tweak-tools
</code></pre></div></div>

<p>This is a central portal for managing extensions, themes, fonts, icons and more.</p>

<p>I installed a custom theme called <code class="highlighter-rouge">numix</code>, and also installed the a set of “circle” icons from numix that look pretty good. Once installed with <code class="highlighter-rouge">yaourt</code>, the <code class="highlighter-rouge">numix</code> theme and icons can be activated through the <code class="highlighter-rouge">gnome-tweak-tool</code>. You can launch <code class="highlighter-rouge">gnome-tweak-tool</code> by simply running <code class="highlighter-rouge">gnome-tweak-tool</code> in the terminal.</p>

<p>One other great tool for adding extensions to GNOME is <code class="highlighter-rouge">extensions.gnome.org</code>. To use this you need to download an extension for Firefox as well as a small package (it prompts you to do this on the website). Once both of these are installed, you can add extensions directly from Firefox. Two extensions that I added are <code class="highlighter-rouge">Dash to Dock</code> and <code class="highlighter-rouge">Dynamic top bar</code> for managing the icon dock and top bar. Another great extension is the <code class="highlighter-rouge">Removable drive menu</code>.</p>

<h2 id="conclusion">Conclusion</h2>

<p>I am very happy with this VirtualBox setup. I still want to install Arch Linux on “bare metal”, and I may do this with a spare SSD that I have. This</p>

  </div>

<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'briancaffey'; // required: replace example with your forum shortname
  var disqus_identifier = "/2017/08/03/arch-linux-install.html";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Brian Caffey</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Brian Caffey</li>
          <li><a href="mailto:briancaffey2010@gmail.com">briancaffey2010@gmail.com</a></li>
          <li><a href="http://briancaffey.com" target="_blank">briancaffey.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/briancaffey">
    <span class="purple-icon icon--github">
        <svg viewBox="0 0 16 16">
    <path fill="#6e5494" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
</svg>
    </span>
    <span class="username">
        briancaffey
    </span>
</a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/briancaffey"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#00aced" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">briancaffey</span></a>

          </li>
          
          
          <li>
                <a href="https://www.linkedin.com/in/brian-caffey-06b22a18">
      <span class="icon  icon--linkedin">
        <svg viewBox="0 50 512 512" >
          <path fill="#828282" d="M150.65,100.682c0,27.992-22.508,50.683-50.273,50.683c-27.765,0-50.273-22.691-50.273-50.683
          C50.104,72.691,72.612,50,100.377,50C128.143,50,150.65,72.691,150.65,100.682z M143.294,187.333H58.277V462h85.017V187.333z
          M279.195,187.333h-81.541V462h81.541c0,0,0-101.877,0-144.181c0-38.624,17.779-61.615,51.807-61.615
          c31.268,0,46.289,22.071,46.289,61.615c0,39.545,0,144.181,0,144.181h84.605c0,0,0-100.344,0-173.915
          s-41.689-109.131-99.934-109.131s-82.768,45.369-82.768,45.369V187.333z"/>
        </svg>
      </span>
  
      <span class="username">Brian Caffey</span>
    </a>
          </li>
          
          
          <li>
            <a href="https://stackoverflow.com/users/6084948/briancaffey">
    <span class="so-icon icon--github">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 120 120" style="enable-background:new 0 0 120 120;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#BCBBBB;}
	.st1{fill:#F48023;}
</style>
<polygon class="st0" points="84.4,93.8 84.4,70.6 92.1,70.6 92.1,101.5 22.6,101.5 22.6,70.6 30.3,70.6 30.3,93.8 "/>
<path class="st1" d="M38.8,68.4l37.8,7.9l1.6-7.6l-37.8-7.9L38.8,68.4z M43.8,50.4l35,16.3l3.2-7l-35-16.4L43.8,50.4z M53.5,33.2
	l29.7,24.7l4.9-5.9L58.4,27.3L53.5,33.2z M72.7,14.9l-6.2,4.6l23,31l6.2-4.6L72.7,14.9z M38,86h38.6v-7.7H38V86z"/>
</svg>

    </span>
    <span class="username">
        briancaffey
    </span>
</a>
          </li>
          
          
          <li>
            <a href="https://steemit.com/@mrbrian">
    <span class="so-icon icon--github">
        <svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>steem</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="steem" fill-rule="nonzero" fill="#07DFB0"><g id="Group-9"><g id="SteemIt_LogoType_Logo" transform="translate(0.122180, 0.120594)"><path d="M26.220401,8.97838251 C24.9619868,7.74033201 23.4972752,6.83444139 21.9397298,6.25064522 C22.8474384,3.62356245 26.065678,2.66734458 26.065678,2.66734458 C26.065678,2.66734458 18.5564522,-1.16759234 10.2632962,0.362356245 C7.49891092,0.795170648 4.84798918,2.46603555 2.90879351,4.67036938 C-1.29967369,9.45145872 -0.742670683,16.6482564 4.15689285,20.7549605 C4.9098784,21.3890839 5.72475318,21.9024219 6.57057257,22.3151054 C6.5602577,22.30504 6.5602577,22.284909 6.54994283,22.2748436 C6.57057257,22.3251709 6.59120231,22.3754981 6.62214692,22.4258254 C5.51845577,25.183759 1.99077002,25.9386679 1.99077002,25.9386679 C1.99077002,25.9386679 6.65309153,28.8073215 12.914218,29.5521648 C14.5749121,29.7534739 16.338755,29.8038011 18.1644871,29.6125576 C21.0629658,29.3810522 23.9511295,27.8712345 26.148197,25.7474243 C30.9033523,21.1374476 30.9446118,13.628621 26.220401,8.97838251 Z M24.074908,23.9155122 C22.3007502,25.6266389 19.6498285,26.7137076 17.6074841,26.8646894 C17.5868544,26.8646894 17.5662246,26.8646894 17.5559098,26.8646894 C16.1634022,27.0056057 14.6161716,27.0257366 13.1308303,26.8445585 C10.9440777,26.5828567 9.3659025,25.9889951 7.81867191,25.4152644 C8.60260207,24.670421 9.38653224,23.643745 9.70629323,22.7579853 C9.91259064,22.2345818 9.8919609,21.6507856 9.644404,21.1374476 C7.98370984,17.7755869 8.70575078,13.7494064 11.4391915,11.1323891 C13.4196466,9.23001879 16.1427725,8.33419363 18.9071578,8.66635352 C20.9391873,8.90792435 22.7855491,9.78361861 24.229631,11.2028472 C27.736687,14.6653625 27.6129086,20.5234551 24.074908,23.9155122 Z" id="Shape"></path></g></g></g></g></svg>
    </span>
    <span class="username">
        mrbrian
    </span>
</a>
          </li>
          
        </ul>
      </div>
      
      <div class="footer-col footer-col-3">
        <p>Thanks for visiting my site, please take a minute to look around!
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
